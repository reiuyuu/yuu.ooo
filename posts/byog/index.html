<!doctype html><html lang=zh-cn><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=theme-color content="dark"><title>CS 61B Project 2: BYoG — Build Your Own Roguelike Game - reiuyuu</title><script async src="https://www.googletagmanager.com/gtag/js?id=G-YQ48S2G5L8"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-YQ48S2G5L8")</script><script type=application/javascript>var doNotTrack=!1;doNotTrack||(window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","G-YQ48S2G5L8","auto"),ga("send","pageview"))</script><script async src=https://www.google-analytics.com/analytics.js></script><meta property="og:site_name" content="reiuyuu"><meta property="og:title" content="CS 61B Project 2: BYoG — Build Your Own Roguelike Game | reiuyuu"><meta itemprop=name content="CS 61B Project 2: BYoG — Build Your Own Roguelike Game | reiuyuu"><meta name=twitter:title content="CS 61B Project 2: BYoG — Build Your Own Roguelike Game | reiuyuu"><meta name=application-name content="CS 61B Project 2: BYoG — Build Your Own Roguelike Game | reiuyuu"><meta name=twitter:card content="summary"><meta name=description content="reiuyuu"><meta name=twitter:description content="reiuyuu"><meta itemprop=description content="reiuyuu"><meta property="og:description" content="reiuyuu"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><link rel=stylesheet href=/sass/main.min.71ca7fe19124586d6f9522265c79b8d67890d75014026e3fdd826eddbc4d5b6a.css></head><script>(function(){const e="ThemeColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="ThemeColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.userColorScheme="dark":document.documentElement.dataset.userColorScheme="light"})()</script><body class=dark><nav class=navbar><div class=container><div class=flex><div><a class=brand href=/>reiuyuu</a></div><div class=flex><button id=dark-mode-button><svg class="light" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" focusable="false" width="1em" height="1em" style="-ms-transform:rotate(360deg);-webkit-transform:rotate(360deg);transform:rotate(360deg)" viewBox="0 0 36 36"><path fill="#ffd983" d="M30.312.776C32 19 20 32 .776 30.312c8.199 7.717 21.091 7.588 29.107-.429C37.9 21.867 38.03 8.975 30.312.776z"/><path d="M30.705 15.915a1.163 1.163.0 101.643 1.641 1.163 1.163.0 00-1.643-1.641zm-16.022 14.38a1.74 1.74.0 000 2.465 1.742 1.742.0 100-2.465zm13.968-2.147a2.904 2.904.0 01-4.108.0 2.902 2.902.0 010-4.107 2.902 2.902.0 014.108.0 2.902 2.902.0 010 4.107z" fill="#ffcc4d"/><rect x="0" y="0" width="36" height="36" fill="rgba(0, 0, 0, 0)"/></svg><svg class="dark" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" focusable="false" width="1em" height="1em" style="-ms-transform:rotate(360deg);-webkit-transform:rotate(360deg);transform:rotate(360deg)" viewBox="0 0 36 36"><path fill="#ffd983" d="M16 2s0-2 2-2 2 2 2 2v2s0 2-2 2-2-2-2-2V2zm18 14s2 0 2 2-2 2-2 2h-2s-2 0-2-2 2-2 2-2h2zM4 16s2 0 2 2-2 2-2 2H2s-2 0-2-2 2-2 2-2h2zm5.121-8.707s1.414 1.414.0 2.828-2.828.0-2.828.0L4.878 8.708s-1.414-1.414.0-2.829c1.415-1.414 2.829.0 2.829.0l1.414 1.414zm21 21s1.414 1.414.0 2.828-2.828.0-2.828.0l-1.414-1.414s-1.414-1.414.0-2.828 2.828.0 2.828.0l1.414 1.414zm-.413-18.172s-1.414 1.414-2.828.0.0-2.828.0-2.828l1.414-1.414s1.414-1.414 2.828.0.0 2.828.0 2.828l-1.414 1.414zm-21 21s-1.414 1.414-2.828.0.0-2.828.0-2.828l1.414-1.414s1.414-1.414 2.828.0.0 2.828.0 2.828l-1.414 1.414zM16 32s0-2 2-2 2 2 2 2v2s0 2-2 2-2-2-2-2v-2z"/><circle fill="#ffd983" cx="18" cy="18" r="10"/><rect x="0" y="0" width="36" height="36" fill="rgba(0, 0, 0, 0)"/></svg></button></div></div></div></nav><main><div class=container><article lang=en><header class=article-header><div class=thumb><div><h1>CS 61B Project 2: BYoG — Build Your Own Roguelike Game</h1><div class=post-meta><div><time>October 30, 2022</time></div></div></div></div></header><div class=article-post><h2 id=introduction><a href=#introduction class=anchor><svg class="icon" aria-hidden="true" focusable="false" height="16" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5.0-3-1.69-3-3.5S2.55 3 4 3h4c1.45.0 3 1.69 3 3.5.0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98.0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98.0-2-1.22-2-2.5.0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45.0 3-1.69 3-3.5S14.5 6 13 6z"/></svg></a>Introduction</h2><p><a href=https://sp18.datastructur.es/materials/proj/proj2/proj2>Project 2: CS61BYoG</a> is the third project (there is Project 0) in <a href=https://sp18.datastructur.es/index.html>CS 61B Data Structures, Spring 2018</a>. Its specific theme is <strong>Large Scale Design and Testing</strong>.<sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup> As described in the material, the task is to create an engine for generating explorable worlds — that is, to design and implement a 2D tile-based game.</p><blockquote><p>By &ldquo;tile-based&rdquo;, we mean the world for your game will consist of a 2D grid of tiles. By &ldquo;game&rdquo; we mean that the player will be able to walk around and interact with the world.<sup id=fnref:2><a href=#fn:2 class=footnote-ref role=doc-noteref>2</a></sup></p></blockquote><p>Let&rsquo;s say, a minimal roguelike game would meet the requirement, so I add an &lsquo;R&rsquo; to <strong>BYoG</strong>; that is, <strong>Build Your Own Roguelike Game</strong>. Here I would like to talk about my solution briefly.</p><h2 id=world-generation><a href=#world-generation class=anchor><svg class="icon" aria-hidden="true" focusable="false" height="16" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5.0-3-1.69-3-3.5S2.55 3 4 3h4c1.45.0 3 1.69 3 3.5.0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98.0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98.0-2-1.22-2-2.5.0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45.0 3-1.69 3-3.5S14.5 6 13 6z"/></svg></a>World Generation</h2><p>The first goal of the project will be to write a world generator. The world will be pseudorandomly generated, including rooms and hallways, drawn using the tile engine provided. My final version will be as the image shown below. Not much surprise, but that&rsquo;s what will cost 80% of the time in this project. You may say project 2 is about <strong>World Generation Algorithm</strong>.</p><p><img loading=lazy src=/posts/byog/images/random_map_example.png alt="world generation example" width=1200 height=496>
<em>random map example</em></p><h3 id=overview><a href=#overview class=anchor><svg class="icon" aria-hidden="true" focusable="false" height="16" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5.0-3-1.69-3-3.5S2.55 3 4 3h4c1.45.0 3 1.69 3 3.5.0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98.0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98.0-2-1.22-2-2.5.0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45.0 3-1.69 3-3.5S14.5 6 13 6z"/></svg></a>Overview</h3><p>So I started googling for cool world generation algorithms and found <a href=https://journal.stuffwithstuff.com/2014/12/21/rooms-and-mazes/>Rooms and Mazes: A Procedural Dungeon Generator</a>, an article about generating dungeons in roguelike games, by Bob Nystrom. In summary:</p><blockquote><ol><li>Place a bunch of random non-overlapping rooms.</li><li>Fill in the remaining solid regions with mazes.</li><li>Connect each of the mazes and rooms to their neighbors, with a chance to add some extra connections.</li><li>Remove all of the dead ends.<sup id=fnref:3><a href=#fn:3 class=footnote-ref role=doc-noteref>3</a></sup></li></ol></blockquote><p>I have to say it quite matches the <a href="https://sp18.datastructur.es/materials/proj/proj2/proj2#:~:text=The%20requirements%20for%20your%20world%20are%20listed%20below%3A">requirements</a>, and its <a href=https://github.com/munificent/hauberk/blob/db360d9efa714efb6d937c31953ef849c7394a39/lib/src/content/dungeon.dart>implementation</a> is pretty fancy and neat. So I rewrote it in Java with minor modifications. My contribution seems minimal, but I thought it would be worth writing down and going into a few details, including three critical steps: <code>addRooms</code>, <code>growMaze</code>, then <code>connectRegions</code>.</p><h3 id=addrooms><a href=#addrooms class=anchor><svg class="icon" aria-hidden="true" focusable="false" height="16" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5.0-3-1.69-3-3.5S2.55 3 4 3h4c1.45.0 3 1.69 3 3.5.0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98.0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98.0-2-1.22-2-2.5.0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45.0 3-1.69 3-3.5S14.5 6 13 6z"/></svg></a>addRooms</h3><p>Starting with a 2D grid of WALL tile filled map, it first calls <code>addRooms</code>: Do a <code>numRoomTries</code> of attempts to place rooms. In each loop, it first creates a room with random width, height and position. Then checks if this room overlaps an existing one. If so, skip it; otherwise, dig it out, i.e. fill in the FLOOR tile.</p><h3 id=growmaze><a href=#growmaze class=anchor><svg class="icon" aria-hidden="true" focusable="false" height="16" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5.0-3-1.69-3-3.5S2.55 3 4 3h4c1.45.0 3 1.69 3 3.5.0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98.0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98.0-2-1.22-2-2.5.0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45.0 3-1.69 3-3.5S14.5 6 13 6z"/></svg></a>growMaze</h3><p>It then iterates every tile in the map and performs <code>growMaze</code> — a flood fill algorithm, where it could be. This resulted in the rest of the map being filled with mazes. Here, it is worth mentioning that as the maze incrementally grows from one tile to the next, it requires polling the current tile&rsquo;s four directions, up, right, down, and left, every time. The trick to this is the preset <code>CARDINALS</code>:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span> <span class=kd>static</span> <span class=kd>final</span> <span class=n>Position</span><span class=o>[]</span> <span class=n>CARDINALS</span> <span class=o>=</span> <span class=k>new</span> <span class=n>Position</span><span class=o>[]</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=k>new</span> <span class=n>Position</span><span class=o>(</span><span class=n>1</span><span class=o>,</span> <span class=n>0</span><span class=o>),</span>
</span></span><span class=line><span class=cl>    <span class=k>new</span> <span class=n>Position</span><span class=o>(</span><span class=n>0</span><span class=o>,</span> <span class=n>1</span><span class=o>),</span>
</span></span><span class=line><span class=cl>    <span class=k>new</span> <span class=n>Position</span><span class=o>(-</span><span class=n>1</span><span class=o>,</span> <span class=n>0</span><span class=o>),</span>
</span></span><span class=line><span class=cl>    <span class=k>new</span> <span class=n>Position</span><span class=o>(</span><span class=n>0</span><span class=o>,</span> <span class=o>-</span><span class=n>1</span><span class=o>)</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=n>Position</span> <span class=nf>turn</span><span class=o>(</span><span class=n>Position</span> <span class=n>dir</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=k>new</span> <span class=n>Position</span><span class=o>(</span><span class=k>this</span><span class=o>.</span><span class=na>x</span> <span class=o>+</span> <span class=n>dir</span><span class=o>.</span><span class=na>x</span><span class=o>,</span> <span class=k>this</span><span class=o>.</span><span class=na>y</span> <span class=o>+</span> <span class=n>dir</span><span class=o>.</span><span class=na>y</span><span class=o>);</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=k>for</span> <span class=o>(</span><span class=n>Position</span> <span class=n>dir</span> <span class=o>:</span> <span class=n>Position</span><span class=o>.</span><span class=na>CARDINALS</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=n>newPos</span> <span class=o>=</span> <span class=n>oldPos</span><span class=o>.</span><span class=na>turn</span><span class=o>(</span><span class=n>dir</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=o>...</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=connectregions><a href=#connectregions class=anchor><svg class="icon" aria-hidden="true" focusable="false" height="16" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5.0-3-1.69-3-3.5S2.55 3 4 3h4c1.45.0 3 1.69 3 3.5.0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98.0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98.0-2-1.22-2-2.5.0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45.0 3-1.69 3-3.5S14.5 6 13 6z"/></svg></a>connectRegions</h3><p>After filling in the rooms and mazes, find connections between them. We treat each region of tiles as a single vertex and each connector as an edge between them,<sup id=fnref1:3><a href=#fn:3 class=footnote-ref role=doc-noteref>3</a></sup> and then it is all about finding a spanning tree:</p><p><code>connectRegions</code> first creates a list of tiles (<code>connectors</code>) that can connect two or more regions and a map (<code>merged</code>) that keeps track of all merged regions, as well as a set of unconnected regions (<code>openRegions</code>). Then, it keeps connecting regions and updating the <code>openRegions</code> until it is down to one.</p><p>The process is pretty straightforward:</p><blockquote><ol><li>Pick a random room to be the main region.</li><li>Pick a random connector that touches the main region and open it up.</li><li>The connected region is now part of the main one. Unify it.</li><li>Remove any extraneous connectors.</li><li>If there are still connectors left, go to #2.<sup id=fnref2:3><a href=#fn:3 class=footnote-ref role=doc-noteref>3</a></sup></li></ol></blockquote><p>All that remains is to make a few more tweaks. Remove all of the dead ends and inner walls, place an exit and one player, then we&rsquo;re good to go. And I think I will stop here.</p><h2 id=interactivity><a href=#interactivity class=anchor><svg class="icon" aria-hidden="true" focusable="false" height="16" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5.0-3-1.69-3-3.5S2.55 3 4 3h4c1.45.0 3 1.69 3 3.5.0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98.0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98.0-2-1.22-2-2.5.0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45.0 3-1.69 3-3.5S14.5 6 13 6z"/></svg></a>Interactivity</h2><blockquote><p>In the second phase of the game, you&rsquo;ll add the ability for the user to actually play the game, and will also add user interface (UI) elements to your game to make it feel more immersive and informative.<sup id=fnref1:2><a href=#fn:2 class=footnote-ref role=doc-noteref>2</a></sup></p></blockquote><h3 id=game-ui-appearance><a href=#game-ui-appearance class=anchor><svg class="icon" aria-hidden="true" focusable="false" height="16" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5.0-3-1.69-3-3.5S2.55 3 4 3h4c1.45.0 3 1.69 3 3.5.0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98.0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98.0-2-1.22-2-2.5.0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45.0 3-1.69 3-3.5S14.5 6 13 6z"/></svg></a>Game UI Appearance</h3><p>The game uses the provided TileEngine, which makes heavy use of StdDraw, for displaying graphics. When the game runs with <code>Core.Game.playWithKeyboard()</code> method, it displays the menu with three options as shown below.</p><p><img loading=lazy src=/posts/byog/images/menu.png alt=menu width=1200 height=560>
<em>game menu</em></p><p>We may press N for &ldquo;New Game&rdquo; or L for &ldquo;Load Game&rdquo;, and the game start. The user interface consists of a 2D grid of tiles showing the current state of the world and a HUD that displays the description of the tile under the mouse pointer. And that&rsquo;s it, without any unnecessary clutter or confusion.</p><p><img loading=lazy src=/posts/byog/images/game_ui.png alt=menu width=1200 height=560>
<em>game UI</em></p><h3 id=game-ui-behavior><a href=#game-ui-behavior class=anchor><svg class="icon" aria-hidden="true" focusable="false" height="16" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5.0-3-1.69-3-3.5S2.55 3 4 3h4c1.45.0 3 1.69 3 3.5.0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98.0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98.0-2-1.22-2-2.5.0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45.0 3-1.69 3-3.5S14.5 6 13 6z"/></svg></a>Game UI Behavior</h3><p>The game begins, and we can be in control of the &lsquo;@&rsquo; character to move up, left, down and right using the W, A, S, and D keys, respectively. That&rsquo;s how we interact with the world. Here we use <code>StdDraw</code> to handle user input:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>private</span> <span class=kt>char</span> <span class=nf>solicitInput</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=k>while</span> <span class=o>(</span><span class=kc>true</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=o>(</span><span class=n>StdDraw</span><span class=o>.</span><span class=na>hasNextKeyTyped</span><span class=o>())</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=n>Character</span><span class=o>.</span><span class=na>toUpperCase</span><span class=o>(</span><span class=n>StdDraw</span><span class=o>.</span><span class=na>nextKeyTyped</span><span class=o>());</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></td></tr></table></div></div><p>The game mechanics is that users win by moving the &lsquo;@&rsquo; character to a golden colored WALL tile representing the exit, without touching the wall along the way. There are no additional bells or whistles; I believe that&rsquo;s all it needs to function correctly.</p><h3 id=saving-and-loading><a href=#saving-and-loading class=anchor><svg class="icon" aria-hidden="true" focusable="false" height="16" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5.0-3-1.69-3-3.5S2.55 3 4 3h4c1.45.0 3 1.69 3 3.5.0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98.0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98.0-2-1.22-2-2.5.0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45.0 3-1.69 3-3.5S14.5 6 13 6z"/></svg></a>Saving and Loading</h3><blockquote><p>Your game must have the ability to save the game while playing and load the game in the exact state of the most recent save after quitting and opening the game back up.<sup id=fnref2:2><a href=#fn:2 class=footnote-ref role=doc-noteref>2</a></sup></p></blockquote><p>The technique to accomplish this is the Java interface <code>Serializable</code>. What it does is basically translate a data structure or object state into a format that can be stored or transmitted. Implementing the interface marks the class as &ldquo;okay to serialize&rdquo;, and Java then handles serialization internally.<sup id=fnref:4><a href=#fn:4 class=footnote-ref role=doc-noteref>4</a></sup></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span> <span class=kd>class</span> <span class=nc>MapGenerator</span> <span class=kd>extends</span> <span class=n>StageBuilder</span> <span class=o>{</span> <span class=o>...</span> <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kd>class</span> <span class=nc>Position</span> <span class=kd>extends</span> <span class=n>StageBuilder</span> <span class=o>{</span> <span class=o>...</span> <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kd>class</span> <span class=nc>Room</span> <span class=kd>extends</span> <span class=n>StageBuilder</span> <span class=o>{</span> <span class=o>...</span> <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kd>class</span> <span class=nc>Player</span> <span class=kd>extends</span> <span class=n>StageBuilder</span> <span class=o>{</span> <span class=o>...</span> <span class=o>}</span>
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>abstract</span> <span class=kd>class</span> <span class=nc>StageBuilder</span> <span class=kd>implements</span> <span class=n>Serializable</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>private</span> <span class=kd>static</span> <span class=kd>final</span> <span class=kt>long</span> <span class=n>serialVersionUID</span> <span class=o>=</span> <span class=n>1234567890L</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=o>...</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=pseudorandom><a href=#pseudorandom class=anchor><svg class="icon" aria-hidden="true" focusable="false" height="16" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5.0-3-1.69-3-3.5S2.55 3 4 3h4c1.45.0 3 1.69 3 3.5.0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98.0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98.0-2-1.22-2-2.5.0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45.0 3-1.69 3-3.5S14.5 6 13 6z"/></svg></a>Pseudorandom</h3><p>Another critical topic of this project is pseudorandom. By pseudorandom, it means that the world generated, given a different seed, did vary greatly; but for a certain seed, it is deterministic.</p><p>The <code>Random</code> object would work; it is guaranteed to output the same sequence of numbers, which is completely determined by an initial seed. And the same sequence of numbers determines the width, height and location of the rooms, how twists and turns the maze is, and every single connector. Thus, the world should yield exactly the same.</p><h2 id=end><a href=#end class=anchor><svg class="icon" aria-hidden="true" focusable="false" height="16" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5.0-3-1.69-3-3.5S2.55 3 4 3h4c1.45.0 3 1.69 3 3.5.0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98.0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98.0-2-1.22-2-2.5.0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45.0 3-1.69 3-3.5S14.5 6 13 6z"/></svg></a>End</h2><p>That&rsquo;s my naive solution; you may grab the code <a href=https://github.com/reiuyuu/cs61b-sp18/tree/main/proj2/byog>here</a>. I am pretty aware that the game I built doesn&rsquo;t look nice or fun. Nonetheless, project 2 is not about games; what really matters is, as mentioned in the material:</p><blockquote><p>The goal of this project is to teach you how to handle a larger piece of code with little starter code in the hopes of emulating something like a product development cycle.<sup id=fnref3:2><a href=#fn:2 class=footnote-ref role=doc-noteref>2</a></sup></p></blockquote><div class=footnotes role=doc-endnotes><hr><ol><li id=fn:1><p><a href=https://sp18.datastructur.es/about.html>About | CS 61B Spring 2018</a>&#160;<a href=#fnref:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:2><p><a href=https://sp18.datastructur.es/materials/proj/proj2/proj2>Project 2: CS61BYoG | CS 61B Spring 2018</a>&#160;<a href=#fnref:2 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a>&#160;<a href=#fnref1:2 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a>&#160;<a href=#fnref2:2 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a>&#160;<a href=#fnref3:2 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:3><p><a href=https://journal.stuffwithstuff.com/2014/12/21/rooms-and-mazes/>Rooms and Mazes: A Procedural Dungeon Generator - journal.stuffwithstuff.com</a>&#160;<a href=#fnref:3 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a>&#160;<a href=#fnref1:3 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a>&#160;<a href=#fnref2:3 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:4><p><a href=https://en.wikipedia.org/wiki/Serialization>Serialization - Wikipedia</a>&#160;<a href=#fnref:4 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li></ol></div></div></article></div></main><footer class=footer><div class=container><div class=social><div class=text>find me at</div><div class=site><a href=https://github.com/reiuyuu target=_blank rel=noopener aria-label=github>GitHub</a>
<a href=https://twitter.com/reiuyuu target=_blank rel=noopener aria-label=twitter>Twitter</a>
<a href=https://weibo.com/reiuyuu target=_blank rel=noopener aria-label=weibo>Weibo</a>
<a href=https://www.douban.com/people/reiuyuu/ target=_blank rel=noopener aria-label=douban>Douban</a>
<a href=mailto:reiuyuu@gmail.com target=_blank rel=noopener aria-label=email>Email</a><div>or any other /reiuyuu</div></div></div></div><script defer src=/ts/features.dd8e5b18a6dda91367e396fd8dc9b9f83a1993065f709a53e056e0f2e9096ea1.js data-enable-footnotes=false></script></footer></body></html>